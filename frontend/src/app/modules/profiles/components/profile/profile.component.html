<app-loading-spinner [isLoading]="isLoading"></app-loading-spinner>
<div *ngIf="profile && !isLoading">
  <div>
    <img class="absolute max-w-[calc(64rem-2rem)] z-0 w-[calc(100%-2rem)] h-[250px] rounded-[20px] object-cover" src="https://wallpaperaccess.com/full/1419752.jpg" alt="user background picture">
    <div class="flex flex-row pt-[125px] pl-10">
      <div class="avatar">
        <div [ngClass]="{ 'w-[180px] rounded-full border-white border-4' : true,
                    'hover:filter hover:brightness-50 hover:blur-[1px]': authState().userId === profile.userId}">
          <label class="absolute w-[180px] h-[180px] rounded-full cursor-pointer z-40 justify-center flex flex-col opacity-0 hover:opacity-100">
            <div class="mx-auto">
              <span class="material-symbols-outlined text-black text-[100px]">photo_camera</span>
            </div>
            <input #imageInput id="add-post-image-input" alt="lmao" type="file" accept="image/*" (change)="processImage(imageInput)" class="hidden"/>
          </label>
          <img src="https://tapety.tja.pl/obrazki/tja_normalne/166120.jpg" />
        </div>
      </div>
      <div class="flex flex-col justify-end w-full">
        <div class="flex flex-row justify-between">
          <h1 class="text-3xl font-semibold">{{ profile.firstName + " " + profile.lastName }}</h1>
          <div class="flex flex-row gap-2">
            <button class="flex flex-row gap-2 app-btn btn-primary" (click)="changePassword()">
              <h2 class="">Manage Account</h2>
              <span class="material-symbols-outlined">manage_accounts</span>
            </button>
            <button class="flex flex-row gap-2 app-btn btn-primary" routerLink="settings">
              <h2 class="">Preferences</h2>
              <span class="material-symbols-outlined">settings</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="flex flex-row justify-between mt-4">
    <app-user-profile-navigation></app-user-profile-navigation>
    <app-profile-search-form></app-profile-search-form>
  </div>
</div>
